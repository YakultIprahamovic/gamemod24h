<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yakult Ipramovic Scripts</title>

    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/style.css">

</head>
<body>

    <!-- ================= ADMIN LOGIN POPUP ================= -->
    <div id="adminLoginBox" 
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
        background:rgba(0,0,0,0.85); backdrop-filter:blur(5px);
        display:flex; justify-content:center; align-items:center; z-index:999999;">

        <div style="background:#111b25; padding:25px; border-radius:12px; width:320px;
                    box-shadow:0 0 25px #00eaff;">
            <h3 style="text-align:center; color:#00eaff;">üîê ADMIN LOGIN</h3>

            <input id="adminPass" type="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u Admin"
                style="width:100%; padding:12px; border-radius:8px; border:none;
                       background:#0f1a24; color:white; margin-top:15px;">

            <button onclick="verifyAdmin()"
                style="width:100%; margin-top:15px; padding:12px;
                background:#00eaff; color:black; font-weight:bold; border-radius:8px;">
                ƒêƒÉng nh·∫≠p
            </button>
        </div>
    </div>

    <!-- ================= ADMIN BUTTON ================= -->
    <button onclick="openAdminLogin()"
        style="position:fixed; bottom:20px; right:20px; padding:12px 20px;
               background:#00eaff; border:none; border-radius:10px;
               font-weight:bold; cursor:pointer; z-index:999;">
        Admin
    </button>

    <!-- ================= HERO ================= -->
    <header class="hero-section">
        <img src="assets/img/logo.png" class="hero-avatar" alt="Yakult Ipramovic">

        <h1 class="hero-title">YAKULT IPRAMOVIC ‚ú¶</h1>

        <p class="hero-subtitle">Script & Mod Game VIP ‚Ä¢ Made by xGh0stZ</p>

        <a href="#games" class="btn-hero">Xem danh s√°ch game</a>
    </header>

    <!-- ================= GAME LIST ================= -->
    <section id="games">
        <h2 style="text-align:center; color:#00eaff; text-shadow:0 0 10px #00eaff;">
            Danh s√°ch game
        </h2>

        <div class="game-grid" id="gameList"></div>
    </section>

    <!-- DATA -->
    <script src="assets/data/games.js"></script>

    <!-- ================= GAME RENDER + ADMIN ================= -->
    <script>

        /* ========= GAME RENDER ========= */
        function renderGames() {
            const gameList = document.getElementById("gameList");
            gameList.innerHTML = "";

            gamesData.forEach((game, index) => {
                const el = document.createElement("div");
                el.className = "game-card";

                el.innerHTML = `
                    <img src="${game.image}" class="game-img">
                    <div class="game-name">${game.name}</div>

                    <!-- ADMIN ONLY -->
                    <button class="edit-btn" data-index="${index}" style="
                        display:none; background:#ffaa00; color:#000;
                        padding:8px; width:100%; border-radius:8px; font-weight:bold;">
                        Edit Game
                    </button>

                    <button class="btn-details">Show Details</button>

                    <div class="details-box">
                        <b>M√¥ t·∫£:</b> ${game.description}<br><br>

                        <b>Features:</b>
                        <ul>${game.features.map(f => `<li>‚úî ${f}</li>`).join("")}</ul>

                        <div class="price-box">üí≥ Gi√° th√°ng: <b>${game.monthly}K</b></div>
                        <div class="price-box">üíé Vƒ©nh vi·ªÖn: <b>${game.lifetime}K</b></div>

                        <a class="btn-buy" href="https://t.me/YakultIpramovic">Mua ngay</a>
                        <a class="btn-update" href="https://t.me/YakultIpramovic">Y√™u c·∫ßu c·∫≠p nh·∫≠t</a>
                    </div>
                `;

                // Toggle details
                el.querySelector(".btn-details").onclick = () => {
                    const box = el.querySelector(".details-box");
                    box.style.display = box.style.display === "block" ? "none" : "block";
                };

                // Edit button
                el.querySelector(".edit-btn").onclick = () => editGame(index);

                gameList.appendChild(el);
            });

            applyAdminMode();
        }

        renderGames();


        /* ========= ADMIN LOGIN SYSTEM ========= */

        // HASH PASSWORD = SHA256("yakultvip")
        const ADMIN_HASH = "8a0c746a98c1e8f1c14b7e44d7fe34f6f79c8765bf6e7f6e53b6ddcbbecf8f28";

        function openAdminLogin() {
            document.getElementById("adminLoginBox").style.display = "flex";
        }

        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer);
            return Array.from(new Uint8Array(hashBuffer))
                .map(b => b.toString(16).padStart(2, "0")).join("");
        }

        async function verifyAdmin() {
            const input = document.getElementById("adminPass").value;
            const hash = await sha256(input);

            if (hash === ADMIN_HASH) {
                localStorage.setItem("yakult_admin", "true");
                document.getElementById("adminLoginBox").style.display = "none";
                applyAdminMode();
                alert("ƒêƒÉng nh·∫≠p admin th√†nh c√¥ng!");
            } else {
                alert("Sai m·∫≠t kh·∫©u!");
            }
        }

        function applyAdminMode() {
            const isAdmin = localStorage.getItem("yakult_admin") === "true";

            document.querySelectorAll(".edit-btn").forEach(btn => {
                btn.style.display = isAdmin ? "block" : "none";
            });
        }



        /* ========= ADMIN EDIT GAME ========= */

        function editGame(index) {
            const g = gamesData[index];

            const newName = prompt("T√™n game:", g.name);
            if (!newName) return;

            const newDesc = prompt("M√¥ t·∫£:", g.description);
            if (!newDesc) return;

            const newImg = prompt("Link ·∫£nh:", g.image);
            if (!newImg) return;

            const newFeature = prompt("Features (ngƒÉn c√°ch b·∫±ng d·∫•u ph·∫©y):",
                                      g.features.join(", "));
            if (!newFeature) return;

            const newMonth = prompt("Gi√° th√°ng (K):", g.monthly);
            const newLife = prompt("Gi√° vƒ©nh vi·ªÖn (K):", g.lifetime);

            // UPDATE
            gamesData[index].name = newName;
            gamesData[index].description = newDesc;
            gamesData[index].image = newImg;
            gamesData[index].features = newFeature.split(",").map(x => x.trim());
            gamesData[index].monthly = newMonth;
            gamesData[index].lifetime = newLife;

            alert("ƒê√£ l∆∞u thay ƒë·ªïi!");

            renderGames();
        }

    </script>

</body>
</html>
